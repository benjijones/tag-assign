<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Utility commands</title>
    <link rel="stylesheet" href="gettingStarted.css" type="text/css" />
    <meta name="generator" content="DocBook XSL Stylesheets V1.73.2" />
    <link rel="start" href="index.html" title="Oracle NoSQL Database Administrator's Guide" />
    <link rel="up" href="cli_command_reference.html" title="Appendix A. KVStore Command Reference" />
    <link rel="prev" href="cli_command_reference.html" title="Appendix A. KVStore Command Reference" />
    <link rel="next" href="initialcapacityplanning.html" title="Appendix B. Initial Capacity Planning" />
  </head>
  <body>
    <div xmlns="" class="navheader">
      <div class="libver">
        <p>Library Version DRAFT</p>
      </div>
      <table width="100%" summary="Navigation header">
        <tr>
          <th colspan="3" align="center">Utility commands</th>
        </tr>
        <tr>
          <td width="20%" align="left"><a accesskey="p" href="cli_command_reference.html">Prev</a> </td>
          <th width="60%" align="center">Appendix A. KVStore Command Reference</th>
          <td width="20%" align="right"> <a accesskey="n" href="initialcapacityplanning.html">Next</a></td>
        </tr>
      </table>
      <hr />
    </div>
    <div class="sect1" lang="en" xml:lang="en">
      <div class="titlepage">
        <div>
          <div>
            <h2 class="title" style="clear: both"><a id="independent_commands"></a>Utility commands</h2>
          </div>
        </div>
      </div>
      <div class="toc">
        <dl>
          <dt>
            <span class="sect2">
              <a href="independent_commands.html#makebootconfig">
        makebootconfig
    </a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="independent_commands.html#startagent">
        start
    </a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="independent_commands.html#stopagent">
        stop
    </a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="independent_commands.html#restartagent">
        restart
    </a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="independent_commands.html#runadmin">
        runadmin
    </a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="independent_commands.html#loaddata">
        load
    </a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="independent_commands.html#pingstore">
        ping
    </a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="independent_commands.html#version">
        version
    </a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="independent_commands.html#generateconfig">
        generateconfig
    </a>
            </span>
          </dt>
          <dt>
            <span class="sect2">
              <a href="independent_commands.html#helpjar">
        help
    </a>
            </span>
          </dt>
        </dl>
      </div>
      <p>
        You can access utility commands through <code class="literal">"java -jar"</code>.
       </p>
      <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar &lt;command&gt;</pre>
      <p>
     This appendix contains the following information on the commands:
    </p>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="makebootconfig"></a>
        makebootconfig
    </h3>
            </div>
          </div>
        </div>
        <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar makebootconfig [-verbose]
-root &lt;rootDirectory&gt; -host &lt;hostname&gt; -hahostname &lt;hostname&gt;
-harange &lt;startPort,endPort&gt; -port &lt;port&gt; [-admin &lt;adminPort&gt;]
-store-security [none | configure | enable]
[-config &lt;configFile&gt;][-storagedir &lt;path&gt;] [-capacity &lt;n_rep_nodes&gt;]
[-num_cpus &lt;ncpus&gt;][-memory_mb &lt;memory_mb&gt;] 
[-servicerange &lt;startPort,endPort&gt;]
[-mgmt {snmp|jmx|none}] [-pollport &lt;snmp poll port&gt;]
[-traphost &lt;snmp trap/notification hostname&gt;]
[-trapport &lt;snmp trap/notification port&gt;]</pre>
        <p>
                where:
            </p>
        <div class="itemizedlist">
          <ul type="disc">
            <li>
              <p>
                        <code class="literal">-admin &lt;adminPort&gt;</code>
                        The port on which the web-based Admin Console is contacted.
                        It only needs to be free on the node which runs the admin
                        process. The value defaults to "0", which means that 
                        there will be no admin on this node.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-capacity &lt;n_rep_nodes&gt;</code> 
                        The total number of Replication Nodes a Storage Node
                        can support. The value defaults to "1".
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-config &lt;configFile&gt;</code> 
                        Only specified if more than one Storage Node Agent
                        process will share the same root directory. This value
                        defaults to "config.xml".
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-hahostname &lt;hostname&gt;</code>
                        Can be used to specify a separate network interface for 
                        store replication traffic. This defaults to the hostname 
                        specified using the -host flag.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-harange &lt;startPort,endPort&gt;</code>
                        A range of free ports which the Replication Nodes use
                        to communicate among themselves. These ports should be 
                        sequential and there must be at least as many as the 
                        specified capacity for this node.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-store-security [none | configure | enable] </code>
                       Specifies if security will be used or not. If <code class="literal">-store-security none</code>
                       is specified, no security will be used. If <code class="literal">-store-security configure</code>
                       is specified, security will be used and the security configuration 
                       utility will be invoked as part of the makebootconfig process.
                       If <code class="literal">-store-security enable</code> is specified, security 
                       will be used. You will need to configure security either by
                       utilizing the security configuration utility or by copying 
                       a previously created configuration from another system.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-host &lt;hostname&gt;</code>
                        Identifies a host name associated with the node on which
                        the command is run. This hostname identifies the network 
                        interface used for communication with this node.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-memory_mb &lt;memory_mb&gt;</code> 
                        The total number of megabytes of memory that is available
                        in the machine. If the value is 0, the store will attempt to determine the amount of memory
                        on the machine, but the value is only available when the 
                        JVM used is the Oracle Hotspot JVM. The default value
                        is "0".
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-num_cpus &lt;ncpus&gt;</code> 
                        The total number of processors on the machine available
                        to the Replication Nodes. If the value is 0, the system
                        will attempt to query the Storage Node to determine the
                        number of processors on the machine. This value defaults
                        to "0".
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-port &lt;port&gt;</code>
                        The TCP/IP port on which Oracle NoSQL Database should
                        be contacted. Sometimes referred to as the registry port.
                        This port must be free on the node on which this
                        command is run.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-root &lt;rootDirectory&gt;</code>
                        Identifies where the root directory should reside.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-servicerange &lt;startPort,endPort&gt;</code> 
                        A range of ports that may be used for communication among
                        administrative services running on a Storage Node and its
                        managed services.  This parameter is optional and is useful 
                        when services on a Storage Node must use specific ports for 
                        firewall or other security reasons. By default the services 
                        use anonymous ports.  The format of the value string is
                        "startPort,endPort."  The value varies with the capacity 
                        of the Storage Node.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-storagedir &lt;path&gt;</code> 
                        Specify a path to the directory to be used for a 
                        Replication Node. This flag may be used more than once 
                        in the command to specify multiple storage directories, 
                        but the number should not exceed the capacity for the node.
                        If no storage directory is specified, Replication
                        Nodes use a directory under the root directory.
                    </p>
              <p>
                       The use of the -storagedir argument must be coordinated 
                       with the use of the capacity argument. For example, if 
                       your Storage Node hosts four disks, you would specify 
                       a capacity of four and have four -storagedir arguments.
                    </p>
            </li>
          </ul>
        </div>
        <p>
       Creates a configuration file used to start a not-yet-deployed Storage Node
       to be used in an instance of Oracle NoSQL Database.  The file must not
       already exist. You only need to specify the admin option(the Admin Console port)
       on the node which hosts the initial Oracle NoSQL Database administration processes. 
       To create the initial "boot config" file used to configure the installation
       see <a class="xref" href="install-config.html" title="Installation Configuration">Installation Configuration</a>.
   </p>
        <p>
       OracleNoSQL Database allows Java Management Extensions (JMX) or Simple
       Network Management Protocol (SNMP) agents to be optionally available for
       monitoring, in addition to the native monitoring provided by the Admin
       CLI and the Admin Console. In order to enable JMX or SNMP in the storage 
       node's boot configuration file, you can use the -mgmt, -pollport, -traphost
       and -trapport options. See <a class="xref" href="standardized-monitoring.html" title="Chapter 8.  Standardized Monitoring Interfaces">
      Standardized Monitoring Interfaces
   </a>
       for more information.
    </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="startagent"></a>
        start
    </h3>
            </div>
          </div>
        </div>
        <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar start [-verbose]
-root &lt;rootDirectory&gt; [-config &lt;bootstrapFileName&gt;]</pre>
        <p>
       Starts the Oracle NoSQL Database Storage Node Agent (and if configured,
       store) in the root directory.
    </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="stopagent"></a>
        stop
    </h3>
            </div>
          </div>
        </div>
        <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar stop [-verbose]
-root &lt;rootDirectory&gt; [-config &lt;bootstrapFileName&gt;]</pre>
        <p>
       Stops the Oracle NoSQL Database Storage Node Agent and services related
       to the root directory.
    </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="restartagent"></a>
        restart
    </h3>
            </div>
          </div>
        </div>
        <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar restart [-verbose]
-root &lt;rootDirectory&gt; [-config &lt;bootstrapFileName&gt;]</pre>
        <p>
       Stops and then starts the Oracle NoSQL Database Storage Node Agent and 
       services related to the root directory.
    </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="runadmin"></a>
        runadmin
    </h3>
            </div>
          </div>
        </div>
        <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar runadmin [-verbose]
-host &lt;hostname&gt; -port &lt;port&gt; [single command and arguments]</pre>
        <p>
       Runs a utility which provides a command line interface (CLI). It is used
       to perform store configuration.
    </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="loaddata"></a>
        load
    </h3>
            </div>
          </div>
        </div>
        <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar load [-verbose]
-source &lt;backupDir&gt; -host &lt;hostname&gt; -port &lt;port&gt; 
-store &lt;storeName&gt; [-status &lt;pathToFile&gt;]</pre>
        <p>
                where:
            </p>
        <div class="itemizedlist">
          <ul type="disc">
            <li>
              <p>
                        <code class="literal">-host &lt;hostname&gt;</code>
                        identifies the host name of a node in your store.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-port &lt;port&gt;</code> identifies
                        the registry port in use by the store's node.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-source &lt;backupDir&gt;</code>
                        identifies the on-disk location where the snapshot
                        data is stored.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-status &lt;pathToFile&gt;</code> is an
                        optional parameter that causes the status of the
                        load operation to be saved in the named location on
                        the local machine.
                    </p>
            </li>
            <li>
              <p>
                        <code class="literal">-store &lt;storeName&gt;</code>
                        identifies the name of the store.
                    </p>
            </li>
          </ul>
        </div>
        <p>
       Program used to restore a store from a previously created snapshot.
       By using this tool, you can restore the store to any topology, not
       just the one that was in use when the snapshot was created. <code class="literal">Load</code>
       should be used only to restore to a new, empty store. Do not use this with
       an existing store because it only writes records if they do not
       already exist. See <a class="xref" href="recovery.html#usingload" title="Using the Load Program">Using the Load Program</a>
       for more information.
    </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="pingstore"></a>
        ping
    </h3>
            </div>
          </div>
        </div>
        <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar ping [-verbose]
-host &lt;hostname&gt; -port &lt;port&gt;</pre>
        <p>
       Attempts to contact a store to get status of running services. By using
       the <code class="literal">ping</code> command, you can ensure that the Oracle NoSQL 
       Database client library can contact the Oracle NoSQL Database Storage Agent(SNA). 
       You can use the -host option to check an SNA on a remote host.
    </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="version"></a>
        version
    </h3>
            </div>
          </div>
        </div>
        <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar version</pre>
        <p>
       Prints version.
    </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="generateconfig"></a>
        generateconfig
    </h3>
            </div>
          </div>
        </div>
        <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar generateconfig [-verbose]
-host &lt;hostname&gt; -port &lt;port&gt; -sn &lt;StorageNodeId&gt; -target &lt;zipfile&gt;</pre>
        <p>
       Generates configuration files for the specified storage node. The generateconfig
       command creates the target zipfile which contains the required configuration
       to re-create the storage node. The top-level directory in the zipfile
       is the store's root directory.
    </p>
      </div>
      <div class="sect2" lang="en" xml:lang="en">
        <div class="titlepage">
          <div>
            <div>
              <h3 class="title"><a id="helpjar"></a>
        help
    </h3>
            </div>
          </div>
        </div>
        <pre class="programlisting">java -Xmx256m -Xms256m \
-jar KVHOME/lib/kvstore.jar help &lt;commandName&gt;</pre>
        <p>
       Prints usage info. With no arguments the top-level shell commands are listed.
       With a command name, additional detail is provided.
    </p>
      </div>
    </div>
    <div class="navfooter">
      <hr />
      <table width="100%" summary="Navigation footer">
        <tr>
          <td width="40%" align="left"><a accesskey="p" href="cli_command_reference.html">Prev</a> </td>
          <td width="20%" align="center">
            <a accesskey="u" href="cli_command_reference.html">Up</a>
          </td>
          <td width="40%" align="right"> <a accesskey="n" href="initialcapacityplanning.html">Next</a></td>
        </tr>
        <tr>
          <td width="40%" align="left" valign="top">Appendix A. KVStore Command Reference </td>
          <td width="20%" align="center">
            <a accesskey="h" href="index.html">Home</a>
          </td>
          <td width="40%" align="right" valign="top"> Appendix B. Initial Capacity Planning</td>
        </tr>
      </table>
    </div>
  </body>
</html>
